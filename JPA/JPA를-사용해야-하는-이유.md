---
title: JPA를 사용해야 하는 이유
date: "2021. 11. 17"
summary: JPA란? JPA를 사용하는 이유는?
---

> 본 내용은 인프런의 "자바 ORM 표준 JPA 프로그래밍 - 기본편" 강의를 수강하면서 작성했습니다.

<br>

우선 JPA가 무엇인지 먼저 학습이 필요

## JPA(Java Persistence API)

**JPA는 자바 진영의 ORM 기술 표준**

'표준, 'API' 와 같은 단어에서 유추할 수 있듯이 JPA는 자바의 ORM 기술을 추상화한 인터페이스 집합이다.  
JPA는 Hibernate를 참고하여 만들어진 표준이기 때문에 가장 많이 사용되는 JPA 구현체 역시 Hibernate이다.

<details><summary>📌ORM이 뭔데? 정리하자.</summary>
<h4>Object-relational mapping(객체-관계 매핑)</h4>
<p>객체지향의 객체와 RDB에 테이블을 각자의 방식으로 설계하고, 둘을 중간에서 매핑해 주는 것</p>
<p>이런 ORM을 자바 진영에서 추상화한 표준이 JPA이고, 대표적인 JPA의 구현체가 Hibernate이다.</p>
</details>

<br>

## JPA가 실무에서 어려운 이유

강좌 소개부터 내가 JPA 강의를 찾아보게 된 이류가 나왔다... 이강의를 결제하게 된 이유이기도 하다.

먼저 "자바 ORM 표준 JPA 프로그래밍" 책을 구매해서 1회독을 했다. 복습 차원에서 개인 토이 프로젝트를 진행했고, 야심차게 ERD를 작성한 뒤 객체 매핑을 시작했는데 생각보다 너무 어려웠다.🥲

JPA가 뭔지 ~~대강은~~ 알겠고, 진짜 빠르게 개발할 수 있을 것 같은 느낌이 들었지만 그렇지 못했다. 뭐든 하나를 구현하려고 해도 계속해서 책만 찾아보게 됐다.

앞으로 프로젝트를 진행하면서 잘못된 매핑으로 인해서 계속 고생할 것 같아 일단 작업을 멈추고 강의를 알아봤고 홀린 듯 결제 버튼을 눌렀다. 💸💸💸

이 강의에서 언급한 JPA를 사용하는데 **어려움을 느끼는 이유 2가지**는 다음과 같다.

1. **객체와 테이블을 매핑하고, 설계하는 방법을 잘 이해하지 못 했다.**  
   ➜ 그게 나야~
2. **JPA 내부 동작을 정확하게 이해하고 있지 않다.**  
   ➜ 잇츠 미.  
   ➜ 동작 방식을 모른다는 건 실제로 에러가 발생했을 때 대처가 어렵고, 디버깅이 힘들다는 점에서 이것이 가장 큰 문제이다.

<br>

## JPA를 사용해야 하는 이유

### 1. 반복되는 작업을 대신해준다.

```java
jpa.persist(member); // 저장(C)
Member member = jpa.find(memberId) // 조회(R)
member.setName("홍길동") // 수정(U)
jpa.remove(member) // 삭제(D)
```

JPA는 CRUD가 이미 구현이 되어 있다. 내부적으로 직접 SQL을 작성하고 객체를 만들어 준다.

적절한 api를 호출하는 것만으로 CRUD 기능을 이용할 수 있다. 이런 작업을 JPA가 대신해 주기 때문에 여기에 소모될 시간을 비지니스로직을 좀 더 객체지향적으로 구현하는 데 사용할 수 있게 된다.

요즘도 JDBC를 사용해서 개발하는 회사가 있겠냐 하겠지만 내가 그런 곳에서 근무를 했었다. 😂  
JDBC를 사용하면서 반복되는 코드를 정말 많이 작성했던 기억이 있다.

DB 테이블의 컬럼이 하나만 추가되더라도 이곳저곳의 SQL을 직접 수정해야 했으며, 수정한 것을 확인하는 작업에 또 시간이 소요되었다. 그마저도 테스트 코드가 있지 않았기 때문에 사람이 하는 일이라 실수가 있을 수 있다는 불안감 늘었다. 중간에 MyBatis를 도입하기는 했지만 SQL 작성과 반복되는 작업을 완전히 없앨 수는 없었다.

그렇기 때문에 JPA가 이런 반복되는 작업을 대신해 주기 때문에 사용해야 한다는 점은 너무 필요성을 느끼고 체감한다.

### 2. 패러다임의 불일치를 해결해준다.

객체지향 객체와 관계형 데이터베이스의 테이블은 서로 연관관계를 맺는 방식이 완전히 다르다.

#### 관계형 데이터베이스

- 정규화된 구조로 저장하기 쉬운 구조로 데이터를 저장하고, **외래키를 통해서 관계를 맺는다.**
- 이 관계는 **양방향**으로 조회 가능하다. (외래키가 없는 테이블에서도 JOIN을 할 수 있다.)

#### 객체지향

- 객제지향에서는 관계를 참조로 가진다. 이 관계는 **단방향**이다.
- 관계형 데이터베이스에는 없는 상속의 개념이 있다.

JPA는 이런 패러다임 불일치 문제를 해결해 준다. 근데 해결해 주다고 해서 ORM 프레임워크가 마법을 부리는 것이 아니다. 적절하게 사용방법을 확실하게 알고 이용할 수 있어야 한다. 매핑 정보에 대한 것을 프레임워크에게 올바르게 알려줘야 그에 맞는 동작을 한다. 그렇기 때문에 JPA가 주는 이점을 잘 활용하기 위해서는 그에 상응하는 학습과 경험이 필요하다.

<br>

## 관계형 데이터베이스와 객체지향 중에 뭐가 더 중요할까??

김영한 개발자님이 강의 중에 하셨던 질문이다. 정답은 당연히 객체지향적으로 설계하고, 객체를 다루는게 더 중요하다고 생각했지만 아니었다.

**관계형 데이터베이스가 더 중요하다고 하셨다. 😂**

자바가 다른 언어로 대체되거나 애플리케이션이 바뀔 수는 있지만 데이터는 더 오래 살아남는다는 이유에서다.

회사를 다니면서 제품 자체가 개발된 지 정말 오래되었었기 때문에 DB 설계도 잘 못되어 있었던 경우가 많았다. 그런데도 확실히 새로운 기능을 추가하거나, 기존 기능을 수정할 때 DB를 건드린 적은 많이 없었던 것 같다. 2년 가까이 근무하면서 기능을 새롭게 리뉴얼하면서 DB 구조를 변경했던 적이 딱 한 번 있었는데, 백업을 하고 진행한다고는 했지만 이미 저장되어 있는 데이터를 마이그레이션 하는 작업이 심리적으로 많이 부담이 됐다. 또 마이그레이션 코드도 작성해야 하고, 이상이 없을지 테스트까지 해야 했기에 소요되는 시간도 만만치 않았다. 확실히 이미 저장되어 있는 DB에 데이터를 건드리는 건 쉽지 않았던 것 같다. 아마도 이런 문제들 때문에 관계형 데이터베이스가 더 중요하다고 하신 게 아닐까 싶다.
